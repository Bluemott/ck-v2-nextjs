#!/usr/bin/env node
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
require("source-map-support/register");
const cdk = require("aws-cdk-lib");
const monitoring_stack_1 = require("../lib/monitoring-stack");
const app = new cdk.App();
// Get environment from context or default to 'production'
const environment = app.node.tryGetContext('environment') || 'production';
const applicationName = app.node.tryGetContext('applicationName') || 'CowboyKimono';
// Get infrastructure details from context or use defaults
const lambdaFunctionName = app.node.tryGetContext('lambdaFunctionName');
const apiGatewayId = app.node.tryGetContext('apiGatewayId');
const cloudFrontDistributionId = app.node.tryGetContext('cloudFrontDistributionId');
const wordpressApiUrl = app.node.tryGetContext('wordpressApiUrl') || 'api.cowboykimono.com';
new monitoring_stack_1.MonitoringStack(app, `${applicationName}MonitoringStack`, {
    environment,
    applicationName,
    lambdaFunctionName,
    apiGatewayId,
    cloudFrontDistributionId,
    wordpressApiUrl,
    env: {
        account: process.env.CDK_DEFAULT_ACCOUNT,
        region: process.env.CDK_DEFAULT_REGION || 'us-east-1',
    },
    description: `CloudWatch monitoring stack for ${applicationName} ${environment} environment`,
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVwbG95LW1vbml0b3JpbmcuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJkZXBsb3ktbW9uaXRvcmluZy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFDQSx1Q0FBcUM7QUFDckMsbUNBQW1DO0FBQ25DLDhEQUEwRDtBQUUxRCxNQUFNLEdBQUcsR0FBRyxJQUFJLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUUxQiwwREFBMEQ7QUFDMUQsTUFBTSxXQUFXLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsYUFBYSxDQUFDLElBQUksWUFBWSxDQUFDO0FBQzFFLE1BQU0sZUFBZSxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLGlCQUFpQixDQUFDLElBQUksY0FBYyxDQUFDO0FBRXBGLDBEQUEwRDtBQUMxRCxNQUFNLGtCQUFrQixHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLG9CQUFvQixDQUFDLENBQUM7QUFDeEUsTUFBTSxZQUFZLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsY0FBYyxDQUFDLENBQUM7QUFDNUQsTUFBTSx3QkFBd0IsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO0FBQ3BGLE1BQU0sZUFBZSxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLGlCQUFpQixDQUFDLElBQUksc0JBQXNCLENBQUM7QUFFNUYsSUFBSSxrQ0FBZSxDQUFDLEdBQUcsRUFBRSxHQUFHLGVBQWUsaUJBQWlCLEVBQUU7SUFDNUQsV0FBVztJQUNYLGVBQWU7SUFDZixrQkFBa0I7SUFDbEIsWUFBWTtJQUNaLHdCQUF3QjtJQUN4QixlQUFlO0lBQ2YsR0FBRyxFQUFFO1FBQ0gsT0FBTyxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsbUJBQW1CO1FBQ3hDLE1BQU0sRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLGtCQUFrQixJQUFJLFdBQVc7S0FDdEQ7SUFDRCxXQUFXLEVBQUUsbUNBQW1DLGVBQWUsSUFBSSxXQUFXLGNBQWM7Q0FDN0YsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiIyEvdXNyL2Jpbi9lbnYgbm9kZVxyXG5pbXBvcnQgJ3NvdXJjZS1tYXAtc3VwcG9ydC9yZWdpc3Rlcic7XHJcbmltcG9ydCAqIGFzIGNkayBmcm9tICdhd3MtY2RrLWxpYic7XHJcbmltcG9ydCB7IE1vbml0b3JpbmdTdGFjayB9IGZyb20gJy4uL2xpYi9tb25pdG9yaW5nLXN0YWNrJztcclxuXHJcbmNvbnN0IGFwcCA9IG5ldyBjZGsuQXBwKCk7XHJcblxyXG4vLyBHZXQgZW52aXJvbm1lbnQgZnJvbSBjb250ZXh0IG9yIGRlZmF1bHQgdG8gJ3Byb2R1Y3Rpb24nXHJcbmNvbnN0IGVudmlyb25tZW50ID0gYXBwLm5vZGUudHJ5R2V0Q29udGV4dCgnZW52aXJvbm1lbnQnKSB8fCAncHJvZHVjdGlvbic7XHJcbmNvbnN0IGFwcGxpY2F0aW9uTmFtZSA9IGFwcC5ub2RlLnRyeUdldENvbnRleHQoJ2FwcGxpY2F0aW9uTmFtZScpIHx8ICdDb3dib3lLaW1vbm8nO1xyXG5cclxuLy8gR2V0IGluZnJhc3RydWN0dXJlIGRldGFpbHMgZnJvbSBjb250ZXh0IG9yIHVzZSBkZWZhdWx0c1xyXG5jb25zdCBsYW1iZGFGdW5jdGlvbk5hbWUgPSBhcHAubm9kZS50cnlHZXRDb250ZXh0KCdsYW1iZGFGdW5jdGlvbk5hbWUnKTtcclxuY29uc3QgYXBpR2F0ZXdheUlkID0gYXBwLm5vZGUudHJ5R2V0Q29udGV4dCgnYXBpR2F0ZXdheUlkJyk7XHJcbmNvbnN0IGNsb3VkRnJvbnREaXN0cmlidXRpb25JZCA9IGFwcC5ub2RlLnRyeUdldENvbnRleHQoJ2Nsb3VkRnJvbnREaXN0cmlidXRpb25JZCcpO1xyXG5jb25zdCB3b3JkcHJlc3NBcGlVcmwgPSBhcHAubm9kZS50cnlHZXRDb250ZXh0KCd3b3JkcHJlc3NBcGlVcmwnKSB8fCAnYXBpLmNvd2JveWtpbW9uby5jb20nO1xyXG5cclxubmV3IE1vbml0b3JpbmdTdGFjayhhcHAsIGAke2FwcGxpY2F0aW9uTmFtZX1Nb25pdG9yaW5nU3RhY2tgLCB7XHJcbiAgZW52aXJvbm1lbnQsXHJcbiAgYXBwbGljYXRpb25OYW1lLFxyXG4gIGxhbWJkYUZ1bmN0aW9uTmFtZSxcclxuICBhcGlHYXRld2F5SWQsXHJcbiAgY2xvdWRGcm9udERpc3RyaWJ1dGlvbklkLFxyXG4gIHdvcmRwcmVzc0FwaVVybCxcclxuICBlbnY6IHtcclxuICAgIGFjY291bnQ6IHByb2Nlc3MuZW52LkNES19ERUZBVUxUX0FDQ09VTlQsXHJcbiAgICByZWdpb246IHByb2Nlc3MuZW52LkNES19ERUZBVUxUX1JFR0lPTiB8fCAndXMtZWFzdC0xJyxcclxuICB9LFxyXG4gIGRlc2NyaXB0aW9uOiBgQ2xvdWRXYXRjaCBtb25pdG9yaW5nIHN0YWNrIGZvciAke2FwcGxpY2F0aW9uTmFtZX0gJHtlbnZpcm9ubWVudH0gZW52aXJvbm1lbnRgLFxyXG59KTsgIl19